<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PECPOP</title>
    <link rel="shortcut icon" type="image/jpg" href="rightpec.ico"/>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" integrity="sha512-Cv93isQdFwaKBV+Z4X8kaVBYWHST58Xb/jVOcV9aRsGSArZsgAnFIhMpDoMDcFNoUtday1hdjn0nGp3+KZyyFw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
</head>
<body onload="startCount()">
    <center style="text-align:right">
        <div class="header">
            <img src="metamaskpng.png" />
            <h5></h5>
            <button id='connectWallet' onclick="">Connect Wallet</button>
            <button id='getBalance' onclick="checkBalance()">Get Balance of Wallet</button>
        
            <p id="walletAddress"></p>
            <p id="walletBalance"></p>
        
        </div>
        <script type="text/javascript">
          window.userWalletAddress = null
          const connectWallet = document.getElementById('connectWallet')
          const walletAddress = document.getElementById('walletAddress')
          const walletBalance = document.getElementById('walletBalance')
    
    
    
          function checkInstalled() {
            if (typeof window.ethereum == 'undefined') {
              connectWallet.innerText = 'MetaMask isnt installed, please install it'
              connectWallet.classList.remove()
              connectWallet.classList.add()
              return false
            }
            connectWallet.addEventListener('click', connectWalletwithMetaMask)
          }
    
          async function connectWalletwithMetaMask() {
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })
            .catch((e) => {
            console.error(e.message)
            return
            })
    
            if (!accounts) { return }
    
            window.userWalletAddress = accounts[0]
            walletAddress.innerText = window.userWalletAddress
    
            connectWallet.innerText = 'Sign Out'
            connectWallet.removeEventListener('click', connectWalletwithMetaMask)
            setTimeout(() => {
              connectWallet.addEventListener('click', signOutOfMetaMask)
            }, 200)
    
          }
    
    
          function signOutOfMetaMask() {
            window.userwalletAddress = null
            walletAddress.innerText = ''
            connectWallet.innerText = 'Connect Wallet'
    
            connectWallet.removeEventListener('click', signOutOfMetaMask)
            setTimeout(() => {
              connectWallet.addEventListener('click', connectWalletwithMetaMask)
            }, 200  )
          }
    
          async function checkBalance() {
            let balance = await window.ethereum.request({ method: "eth_getBalance",
            params: [
              window.userWalletAddress,
              'latest'
            ]
          }).catch((err)=> {
              console.log(err)
          })
    
          console.log(parseFloat((balance) / Math.pow(10,18)))
    
          walletBalance.innerText = parseFloat((balance) / Math.pow(10,18))
        }
    
          window.addEventListener('DOMContentLoaded', () => {
            checkInstalled()
          })
    
    
        </script>
    
      </center>
    <div class="container">
        <h1>PECPOP!!!</h1>
        <p id="score">0</p>
        <img src="leftpec.png" alt="Invalid" id="leftpec" height="500px">
        <div class="tabs">
            <div class="tab">
               <input type="checkbox" id="chck1">
               <label class="tab-label" for="chck1">
                <i class="fas fa-trophy" style="color: gold; margin: 0px 10px 0px 10px; margin-left: -25px;
                margin-right: 30px;"></i>
                #1 <span class="flag-icon flag-icon-us" style="margin: 0px 10px 0px 10px;"></span>120.3B &nbsp;
                LeaderBoard &nbsp; <span class="flag-icon flag-icon-us" style="margin: 0px 10px 0px 10px;"></span>
                <span id="my_score">0</span>
                </label>

               <div class="tab-content">
                    <table id="table">
                        <tr class="bordered" id="somerow">
                            <td></td>
                            <td><i class="fa fa-globe" style="color: blue;"></i></td>
                            <td>WorldWide</td>
                            <td id="wide_score">455,615,518,558</td>
                        </tr>
                        <tr class="bordered">
                            <td><i class='fas fa-medal' style="color: gold;"></i></td>
                            <td><span class="flag-icon flag-icon-us"></span></td>
                            <td>United States</td>
                            <td id="wide_score">19</td>
                        </tr>
                        <tr class="bordered"> 
                            <td><i class='fas fa-medal' style="color: silver;"></i></td>
                            <td><span class="flag-icon flag-icon-jp"></span></td>
                            <td>Japan</td>
                            <td id="wide_score">14</td>
                        </tr>
                        <tr class="bordered">
                            <td><i class='fas fa-medal' style="color: brown;"></i></td>
                            <td><span class="flag-icon flag-icon-ca"></span></td>
                            <td>Canada</td>
                            <td id="wide_score">13</td>
                        </tr>
                        <tr class="bordered">
                            <td>4</td>
                            <td><span class="flag-icon flag-icon-au"></span></td>
                            <td>Australia</td>
                            <td id="wide_score">11</td>
                        </tr>
                        <tr class="bordered">
                            <td>5</td>
                            <td><span class="flag-icon flag-icon-xx"></span></td>
                            <td>Your Score</td>
                            <td id="wide_score">0</td>
                        </tr>
                        <tr class="bordered">
                            <td>6</td>
                            <td><span class="flag-icon flag-icon-fi"></span></td>
                            <td>Finland</td>
                            <td id="wide_score">17</td>
                        </tr>
                        <tr class="bordered">
                            <td>7</td>
                            <td><span class="flag-icon flag-icon-se"></span></td>
                            <td>Sweden</td>
                            <td id="wide_score">13</td>
                        </tr>
                        <tr class="bordered">
                            <td>8</td>
                            <td><span class="flag-icon flag-icon-pl"></span></td>
                            <td>Poland</td>
                            <td id="wide_score">14</td>
                        </tr>
                        <tr class="bordered">
                            <td>9</td>
                            <td><span class="flag-icon flag-icon-dk"></span></td>
                            <td>Denmark</td>
                            <td id="wide_score">18</td>
                        </tr>
                        <tr class="bordered">
                            <td>10</td>
                            <td><span class="flag-icon flag-icon-id"></span></td>
                            <td>Indonesia</td>
                            <td id="wide_score">12</td>
                        </tr>
                        <tr class="bordered">
                            <td>11</td>
                            <td><span class="flag-icon flag-icon-hu"></span></td>
                            <td>Hungary</td>
                            <td id="wide_score">11</td>
                        </tr>
                        <tr class="bordered">
                            <td>12</td>
                            <td><span class="flag-icon flag-icon-rs"></span></td>
                            <td>Serbia</td>
                            <td id="wide_score">11</td>
                        </tr>
                    </table>
               </div>

            </div>
         </div>
    </div>
</body>
</html>
